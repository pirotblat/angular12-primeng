<div class="card">
  <p-table [value]="products1" styleClass="p-datatable-sm" responsiveLayout="scroll">
      <ng-template pTemplate="caption">
          Small Table
      </ng-template>
      <ng-template pTemplate="header">
          <tr>
              <th>Code</th>
              <th>Name</th>
              <th>Category</th>
              <th>Quantity</th>
          </tr>
      </ng-template>
      <ng-template pTemplate="body" let-product>
          <tr>
              <td>{{product.code}}</td>
              <td>{{product.name}}</td>
              <td>{{product.category}}</td>
              <td>{{product.quantity}}</td>
          </tr>
      </ng-template>
  </p-table>
</div>



<div class="content-section introduction">
  <div class="feature-intro">
      <h1>Table <span>Sticky</span></h1>
  </div>
  <!-- <app-demoActions github="table" stackblitz="tablesticky-demo"></app-demoActions> -->
</div>

<div class="content-section implementation">
  <div class="card">
      <p-table [value]="customers">
          <ng-template pTemplate="header">
              <tr>
                  <th>Name</th>
                  <th>Country</th>
                  <th>Representative</th>
                  <th>Status</th>
              </tr>
          </ng-template>
          <ng-template pTemplate="body" let-customer>
              <tr>
                  <td>
                      {{customer.name}}
                  </td>
                  <td>
                      <!-- <img src="assets/showcase/images/flag_placeholder.png" [class]="'flag flag-' + customer.country.code" width="30"> -->
                      <span class="image-text">{{customer.country.name}}</span>
                  </td>
                  <td>
                      <!-- <img [alt]="customer.representative.name" src="assets/showcase/images/demo/avatar/{{customer.representative.image}}" width="32" style="vertical-align: middle" /> -->
                      <span class="image-text">{{customer.representative.name}}</span>
                  </td>
                  <td>
                      <span [class]="'customer-badge status-' + customer.status">{{customer.status}}</span>
                  </td>
              </tr>
          </ng-template>
      </p-table>
  </div>
</div>

<div class="card">
  <h5>Virtual Scroll with Preloaded Data (10000 Rows)</h5>
  <p-table [columns]="cols" [value]="cars" [scrollable]="true" [rows]="100" scrollHeight="250px"
      [virtualScroll]="true" [virtualRowHeight]="40">
      <ng-template pTemplate="header" let-columns>
          <tr>
              <th *ngFor="let col of (columns | reverse)">
                  {{col.header}}
              </th>
          </tr>
      </ng-template>
      <ng-template pTemplate="body" let-rowData let-rowIndex="rowIndex" let-columns="columns">
          <tr style="height:40px">
              <td *ngFor="let col of columns">
                  {{rowData[col.field]}}
              </td>
          </tr>
      </ng-template>
  </p-table>
</div>

<div class="card">
  <h5>Virtual Scroll with Lazy Loading from a Remote Datasource (10000 Rows)</h5>
  <p-table [columns]="cols" [value]="virtualCars" [scrollable]="true" [rows]="100" scrollHeight="250px"
      [virtualScroll]="true" [virtualRowHeight]="40" [lazy]="true" (onLazyLoad)="loadCarsLazy($event)">
      <ng-template pTemplate="header" let-columns>
          <tr>
              <th *ngFor="let col of columns">
                  {{col.header}}
              </th>
          </tr>
      </ng-template>
      <ng-template pTemplate="body" let-rowData let-columns="columns">
          <tr style="height:40px">
              <td *ngFor="let col of columns">
                  {{rowData[col.field]}}
              </td>
          </tr>
      </ng-template>
      <ng-template pTemplate="loadingbody" let-columns="columns">
          <tr style="height:40px">
              <td *ngFor="let col of columns">
                  <div class="loading-text"></div>
                  <p-skeleton [ngStyle]="{'width': '100%'}"></p-skeleton>
              </td>
          </tr>
      </ng-template>
  </p-table>
</div>


<div class="card">
  <h5>Vertical</h5>
  <p-table [value]="customers" [scrollable]="true" scrollHeight="400px">
      <ng-template pTemplate="header">
          <tr>
              <th style="min-width:200px">Name</th>
              <th style="min-width:200px">Country</th>
              <th style="min-width:200px">Company</th>
              <th style="min-width:200px">Representative</th>
          </tr>
      </ng-template>
      <ng-template pTemplate="body" let-customer>
          <tr>
              <td style="min-width:200px">{{customer.name}}</td>
              <td style="min-width:200px">{{customer.country.name}}</td>
              <td style="min-width:200px">{{customer.company}}</td>
              <td style="min-width:200px">{{customer.representative.name}}</td>
          </tr>
      </ng-template>
  </p-table>
</div>

<div class="card">
  <h5>Flexible Viewport</h5>
  <p>Flex scroll feature makes the scrollable viewport section dynamic so that it can grow or shrink relative to the parent size of the table. Click the button below
      to display a resizable and maximizable Dialog where data viewport adjusts itself according to the size changes.</p>

  <button type="button" (click)="showDialog()" pButton icon="pi pi-external-link" label="View"></button>
  <p-dialog header="Header" [resizable]="false" [modal]="true" [maximizable]="true" appendTo="body" [(visible)]="dialogVisible" [style]="{width: '75vw'}" [contentStyle]="{height: '300px'}">
      <p-table [value]="customers" [scrollable]="true" scrollHeight="flex">
          <ng-template pTemplate="header">
              <tr>
                  <th style="min-width:200px">Name</th>
                  <th style="min-width:200px">Country</th>
                  <th style="min-width:200px">Company</th>
                  <th style="min-width:200px">Representative</th>
              </tr>
          </ng-template>
          <ng-template pTemplate="body" let-customer>
              <tr>
                  <td style="min-width:200px">{{customer.name}}</td>
                  <td style="min-width:200px">{{customer.country.name}}</td>
                  <td style="min-width:200px">{{customer.company}}</td>
                  <td style="min-width:200px">{{customer.representative.name}}</td>
              </tr>
          </ng-template>
      </p-table>
      <ng-template pTemplate="footer">
          <button type="button" pButton pRipple icon="pi pi-times" (click)="dialogVisible=false" label="Dismiss" class="p-button-text"></button>
      </ng-template>
  </p-dialog>

  <h5>Full Page Scroll</h5>
  <p>FlexScroll can also be used for cases where scrollable viewport should be responsive with respect to the window size. See the <a [routerLink]="['/table/flexscroll']">Full Page</a> demo for an example.</p>
</div>

<div class="card" >
  <h5>Horizontal and Vertical</h5>

  <p-table [value]="customers" [scrollable]="true"  scrollHeight="400px" scrollDirection="both">
      <ng-template pTemplate="header" >
          <tr>
              <th style="width:100px">Id</th>
              <th style="width:200px">Name</th>
              <th style="width:200px">Country</th>
              <th style="width:200px">Date</th>
              <th style="width:200px">Balance</th>
              <th style="width:200px">Company</th>
              <th style="width:200px">Status</th>
              <th style="width:200px">Activity</th>
              <th style="width:200px">Representative</th>
          </tr>
      </ng-template>
      <ng-template pTemplate="body" let-customer >
          <tr >
              <td style="width:100px">{{customer.id}}</td>
              <td style="width:200px">{{customer.name}}</td>
              <td style="width:200px">{{customer.country.name}}</td>
              <td style="width:200px">{{customer.date}}</td>
              <td style="width:200px">{{formatCurrency(customer.balance)}}</td>
              <td style="width:200px">{{customer.company}}</td>
              <td style="width:200px">{{customer.status}}</td>
              <td style="width:200px">{{customer.activity}}</td>
              <td style="width:200px">{{customer.representative.name}}</td>
          </tr>
      </ng-template>
      <ng-template pTemplate="footer">
          <tr>
              <td style="width:100px">Id</td>
              <td style="width:200px">Name</td>
              <td style="width:200px">Country</td>
              <td style="width:200px">Date</td>
              <td style="width:200px">Balance</td>
              <td style="width:200px">Company</td>
              <td style="width:200px">Status</td>
              <td style="width:200px">Activity</td>
              <td style="width:200px">Representative</td>
          </tr>
      </ng-template>
  </p-table>
</div>

<div class="card">
  <h5>Frozen Rows</h5>
  <p-table [value]="unlockedCustomers" [frozenValue]="lockedCustomers" [scrollable]="true" scrollHeight="400px">
      <ng-template pTemplate="header">
          <tr>
              <th>Name</th>
              <th>Country</th>
              <th>Company</th>
              <th>Representative</th>
              <th style="flex: 0 0 4rem"></th>
          </tr>
      </ng-template>
      <ng-template pTemplate="frozenbody" let-customer let-index="rowIndex">
          <tr>
              <td>{{customer.name}}</td>
              <td>{{customer.country.name}}</td>
              <td>{{customer.company}}</td>
              <td>{{customer.representative.name}}</td>
              <td style="flex: 0 0 4rem">
                  <button pButton pRipple type="button" [icon]="'pi pi-lock-open'" (click)="toggleLock(customer,true,index)" class="p-button-sm p-button-text"></button>
              </td>
          </tr>
      </ng-template>
      <ng-template pTemplate="body" let-customer let-index="rowIndex">
          <tr>
              <td>{{customer.name}}</td>
              <td>{{customer.country.name}}</td>
              <td>{{customer.company}}</td>
              <td>{{customer.representative.name}}</td>
              <td style="flex: 0 0 4rem">
                  <button pButton pRipple type="button" [icon]="'pi pi-lock'" [disabled]="lockedCustomers.length >= 2" (click)="toggleLock(customer,false,index)" class="p-button-sm p-button-text"></button>
              </td>
          </tr>
      </ng-template>
  </p-table>
</div>

<div class="card">
  <h5>Frozen Columns</h5>
  <p-toggleButton [(ngModel)]="balanceFrozen" [onIcon]="'pi pi-lock'" offIcon="pi pi-lock-open" [onLabel]="'Unfreeze Balance'" offLabel="Freeze Balance" [style]="{'width': '12rem'}"></p-toggleButton>

  <p-table [value]="customers" scrollDirection="both" [scrollable]="true" scrollHeight="400px" styleClass="p-mt-3">
      <ng-template pTemplate="header">
          <tr>
              <th style="width:200px" pFrozenColumn>Name</th>
              <th style="width:100px">Id</th>
              <th style="width:200px">Country</th>
              <th style="width:200px">Date</th>
              <th style="width:200px">Company</th>
              <th style="width:200px">Status</th>
              <th style="width:200px">Activity</th>
              <th style="width:200px">Representative</th>
              <th style="width:200px" alignFrozen="right" pFrozenColumn >Balance</th>
              <!-- <th style="width:200px" alignFrozen="right" pFrozenColumn [frozen]="balanceFrozen">Balance</th> -->
          </tr>
      </ng-template>
      <ng-template pTemplate="body" let-customer>
          <tr>
              <td style="width:200px" pFrozenColumn>{{customer.name}}</td>
              <td style="width:100px">{{customer.id}}</td>
              <td style="width:200px">{{customer.country.name}}</td>
              <td style="width:200px">{{customer.date}}</td>
              <td style="width:200px">{{customer.company}}</td>
              <td style="width:200px">{{customer.status}}</td>
              <td style="width:200px">{{customer.activity}}</td>
              <td style="width:200px">{{customer.representative.name}}</td>
              <td style="width:200px" alignFrozen="right"  pFrozenColumn >{{formatCurrency(customer.balance)}}</td>
              <!-- <td style="width:200px" alignFrozen="right"  pFrozenColumn [frozen]="balanceFrozen">{{formatCurrency(customer.balance)}}</td> -->
          </tr>
      </ng-template>
  </p-table>
</div>
<div class="card">
  <h5>Subheader Grouping</h5>
  <p-table [value]="customers" sortField="representative.name" sortMode="single" [scrollable]="true" scrollHeight="400px" rowGroupMode="subheader" groupRowsBy="representative.name">
      <ng-template pTemplate="header">
          <tr>
              <th style="min-width:200px">Name</th>
              <th style="min-width:200px">Country</th>
              <th style="min-width:200px">Company</th>
              <th style="min-width:200px">Status</th>
              <th style="min-width:200px">Date</th>
          </tr>
      </ng-template>
      <ng-template pTemplate="groupheader" let-customer>
          <tr pRowGroupHeader>
              <td colspan="5">
                  <img [alt]="customer.representative.name" src="assets/showcase/images/demo/avatar/{{customer.representative.image}}" width="32" style="vertical-align: middle" />
                  <span class="p-text-bold p-ml-2">{{customer.representative.name}}</span>
              </td>
          </tr>
      </ng-template>
      <ng-template pTemplate="groupfooter" let-customer>
          <tr>
              <td style="text-align: right" class="p-text-bold p-pr-6">Total Customers: {{calculateCustomerTotal(customer.representative.name)}}</td>
          </tr>
      </ng-template>
      <ng-template pTemplate="body" let-customer let-rowIndex="rowIndex">
          <tr>
              <td style="min-width:200px">
                  {{customer.name}}
              </td>
              <td style="min-width:200px">
                  <img src="assets/showcase/images/demo/flag/flag_placeholder.png" [class]="'flag flag-' + customer.country.code" width="30">
                  <span class="image-text">{{customer.country.name}}</span>
              </td>
              <td style="min-width:200px">
                  {{customer.company}}
              </td>
              <td style="min-width:200px">
                  <span [class]="'customer-badge status-' + customer.status">{{customer.status}}</span>
              </td>
              <td style="min-width:200px">
                  {{customer.date}}
              </td>
          </tr>
      </ng-template>
  </p-table>
</div>


<p-table *ngIf="products && products.length>0" [value]="products" dataKey="name" responsiveLayout="scroll">
  <ng-template pTemplate="header">
      <tr>
          <th pSortableColumn="name">Name <p-sortIcon field="name"></p-sortIcon></th>
          <th>Image</th>
          <th pSortableColumn="price">Price <p-sortIcon field="price"></p-sortIcon></th>
          <th pSortableColumn="category">Category <p-sortIcon field="category"></p-sortIcon></th>
          <th pSortableColumn="rating">Reviews <p-sortIcon field="rating"></p-sortIcon></th>
          <th pSortableColumn="inventoryStatus">Status <p-sortIcon field="inventoryStatus"></p-sortIcon></th>
          <th style="width: 3rem"></th>
      </tr>
  </ng-template>
  <ng-template pTemplate="body" let-product let-expanded="expanded">
      <tr>
          <td>{{product.name}}</td>
          <td><img [src]="'assets/showcase/images/demo/product/' + product.image" [alt]="product.name" width="100" class="p-shadow-4" /></td>
          <td>{{product.price | currency:'USD'}}</td>
          <td>{{product.category}}</td>
          <td><p-rating [ngModel]="product.rating" ></p-rating></td>
          <td><span [class]="'product-badge status-' + product.inventoryStatus.toLowerCase()">{{product.inventoryStatus}}</span></td>
          <td>
            <button *ngIf="product.orders.length>0" type="button" pButton pRipple [pRowToggler]="product" class="p-button-text p-button-rounded p-button-plain" [icon]="expanded ? 'pi pi-chevron-up' : 'pi pi-chevron-down'"></button>
          </td>
      </tr>
  </ng-template>
  <ng-template pTemplate="rowexpansion" let-product>
      <tr>
          <td colspan="7">
              <div class="p-p-3">
                  <p-table [value]="product.orders" dataKey="id">
                      <ng-template pTemplate="header">
                          <tr>
                              <th pSortableColumn="id">Id <p-sortIcon field="price"></p-sortIcon></th>
                              <th pSortableColumn="customer">Customer <p-sortIcon field="customer"></p-sortIcon></th>
                              <th pSortableColumn="date">Date <p-sortIcon field="date"></p-sortIcon></th>
                              <th pSortableColumn="amount">Amount <p-sortIcon field="amount"></p-sortIcon></th>
                              <th pSortableColumn="status">Status <p-sortIcon field="status"></p-sortIcon></th>
                              <th style="width: 4rem"></th>
                          </tr>
                      </ng-template>
                      <ng-template pTemplate="body" let-order>
                          <tr>
                              <td>{{order.id}}</td>
                              <td>{{order.customer}}</td>
                              <td>{{order.id}}</td>
                              <td>{{order.amount | currency:'USD'}}</td>
                              <td><span [class]="'order-badge order-' + order.status.toLowerCase()">{{order.status}}</span></td>
                              <td><p-button type="button" icon="pi pi-search"></p-button></td>
                          </tr>
                      </ng-template>
                      <ng-template pTemplate="emptymessage">
                          <tr>
                              <td colspan="6">אין רשומות</td>
                          </tr>
                      </ng-template>
                  </p-table>
              </div>
          </td>
      </tr>
  </ng-template>
</p-table>

